// const mongoose = require('mongoose');
// require('dotenv').config();


// const MONGODB_URI = process.env.MONGO_URI;

// if (!MONGODB_URI) {
//   console.error('Please define the MONGODB_URI environment variable');
//   process.exit(1);
// }

// async function removeInvoiceNumberIndex() {
//   try {
 
//     await mongoose.connect(MONGODB_URI, {
//       useNewUrlParser: true,
//       useUnifiedTopology: true,
//       dbName: 'garments_db',
//     });
    
//     console.log('Connected to MongoDB');
    
  
//     const db = mongoose.connection.db;
//     const collection = db.collection('orders');
    

//     const indexes = await collection.indexes();
//     console.log('Current indexes:', indexes);
    
//     const invoiceIndex = indexes.find(index => 
//       index.key && index.key.invoiceNumber === 1
//     );
    
//     if (invoiceIndex) {
//       console.log('Found invoiceNumber index, dropping it...');
//       await collection.dropIndex('invoiceNumber_1');
//       console.log('Successfully dropped invoiceNumber index');
//     } else {
//       console.log('No invoiceNumber index found');
//     }
    
//     // Verify indexes after dropping
//     const updatedIndexes = await collection.indexes();
//     console.log('Updated indexes:', updatedIndexes);
    
//     console.log('Script completed successfully');
//   } catch (error) {
//     console.error('Error:', error);
//   } finally {
//     // Close the connection
//     await mongoose.connection.close();
//     console.log('MongoDB connection closed');
//     process.exit(0);
//   }
// }

// // Run the function
// removeInvoiceNumberIndex();